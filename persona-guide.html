<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DeathBox ‚Äî Person A Step-by-Step Build Guide</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&family=DM+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #0c0c14;
  --surface: #14141f;
  --surface2: #1c1c2a;
  --surface3: #242436;
  --border: #2a2a40;
  --text: #e8e6f0;
  --text2: #a0a0b8;
  --text3: #6a6a82;
  --orange: #f0943c;
  --orange-bg: rgba(240,148,60,0.08);
  --blue: #5b9cf5;
  --blue-bg: rgba(91,156,245,0.08);
  --green: #4ade80;
  --green-bg: rgba(74,222,128,0.08);
  --red: #f87171;
  --red-bg: rgba(248,113,113,0.08);
  --purple: #a78bfa;
  --purple-bg: rgba(167,139,250,0.08);
  --yellow: #fbbf24;
  --yellow-bg: rgba(251,191,36,0.08);
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'DM Sans', sans-serif;
  line-height: 1.75;
  padding: 40px 20px;
}

.container { max-width: 820px; margin: 0 auto; }

h1 {
  font-size: 38px; font-weight: 800; letter-spacing: -1.5px;
  margin-bottom: 6px;
}
h1 span { color: var(--orange); }

.subtitle { font-size: 15px; color: var(--text3); margin-bottom: 48px; }

h2 {
  font-size: 22px; font-weight: 700; margin-top: 56px; margin-bottom: 16px;
  padding-bottom: 10px; border-bottom: 1px solid var(--border);
  color: var(--text);
}

h3 {
  font-size: 17px; font-weight: 700; margin-top: 32px; margin-bottom: 10px;
  color: var(--orange);
}

p { font-size: 15px; color: var(--text2); margin-bottom: 14px; }
strong { color: var(--text); }

.step-block {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 14px;
  margin: 20px 0;
  overflow: hidden;
}

.step-header {
  padding: 16px 20px;
  background: var(--surface2);
  border-bottom: 1px solid var(--border);
  display: flex; align-items: center; gap: 12px;
}

.step-num {
  width: 32px; height: 32px; border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  font-weight: 800; font-size: 14px; flex-shrink: 0;
}

.step-header h4 { font-size: 16px; font-weight: 700; color: var(--text); }
.step-header .tag {
  margin-left: auto; font-size: 11px; font-weight: 600;
  padding: 3px 10px; border-radius: 6px;
  font-family: 'IBM Plex Mono', monospace; letter-spacing: 0.5px;
}

.step-body { padding: 20px; }
.step-body p { font-size: 14px; }
.step-body ul { list-style: none; padding: 0; }
.step-body ul li {
  padding: 6px 0; padding-left: 20px; position: relative;
  font-size: 14px; color: var(--text2);
}
.step-body ul li::before {
  content: '‚Üí'; position: absolute; left: 0; color: var(--text3);
}

/* Test box */
.test-box {
  background: var(--green-bg);
  border: 1px solid rgba(74,222,128,0.2);
  border-radius: 10px;
  padding: 16px 18px;
  margin: 14px 0;
}

.test-box .test-title {
  font-size: 12px; font-weight: 700; color: var(--green);
  font-family: 'IBM Plex Mono', monospace;
  letter-spacing: 1px; text-transform: uppercase;
  margin-bottom: 8px;
}

.test-box p { font-size: 13px; color: var(--text); margin-bottom: 6px; }

/* What you send / get back */
.data-box {
  background: #0a0a12;
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 16px;
  margin: 12px 0;
  font-family: 'IBM Plex Mono', monospace;
  font-size: 12px;
  color: var(--text2);
  line-height: 1.8;
  overflow-x: auto;
  white-space: pre;
}

.data-box .label {
  display: block;
  font-size: 10px; letter-spacing: 2px; text-transform: uppercase;
  color: var(--text3); margin-bottom: 8px; font-weight: 600;
}

.data-box .key { color: var(--blue); }
.data-box .string { color: var(--green); }
.data-box .num { color: var(--orange); }
.data-box .comment { color: var(--text3); }

/* Callout */
.callout {
  border-radius: 10px; padding: 16px 18px; margin: 16px 0;
  border-left: 3px solid;
}
.callout.warn { background: var(--orange-bg); border-color: var(--orange); }
.callout.info { background: var(--blue-bg); border-color: var(--blue); }
.callout.tip { background: var(--green-bg); border-color: var(--green); }
.callout.danger { background: var(--red-bg); border-color: var(--red); }

.callout .callout-title {
  font-size: 12px; font-weight: 700; letter-spacing: 0.5px; margin-bottom: 6px;
  font-family: 'IBM Plex Mono', monospace;
}
.callout.warn .callout-title { color: var(--orange); }
.callout.info .callout-title { color: var(--blue); }
.callout.tip .callout-title { color: var(--green); }
.callout.danger .callout-title { color: var(--red); }
.callout p { font-size: 13px; margin-bottom: 4px; }

/* Flow arrows */
.flow-chain {
  display: flex; flex-wrap: wrap; align-items: center;
  gap: 8px; margin: 16px 0; padding: 14px 16px;
  background: var(--surface); border: 1px solid var(--border);
  border-radius: 10px;
}
.flow-chip {
  padding: 6px 12px; border-radius: 8px;
  font-size: 12px; font-weight: 600; white-space: nowrap;
}
.flow-chip.fe { background: var(--blue-bg); color: var(--blue); border: 1px solid rgba(91,156,245,0.2); }
.flow-chip.you { background: var(--orange-bg); color: var(--orange); border: 1px solid rgba(240,148,60,0.2); }
.flow-chip.api { background: var(--purple-bg); color: var(--purple); border: 1px solid rgba(167,139,250,0.2); }
.flow-chip.db { background: var(--green-bg); color: var(--green); border: 1px solid rgba(74,222,128,0.2); }
.flow-arrow { color: var(--text3); font-size: 16px; }

/* Prompt block */
.prompt-block {
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 18px;
  margin: 14px 0;
}
.prompt-block .prompt-label {
  font-size: 11px; font-weight: 700; color: var(--purple);
  font-family: 'IBM Plex Mono', monospace;
  letter-spacing: 1px; text-transform: uppercase;
  margin-bottom: 10px;
}
.prompt-block p {
  font-size: 13px; color: var(--text); line-height: 1.8;
  font-style: italic;
}

.divider { height: 1px; background: var(--border); margin: 48px 0; }

/* Numbered list inside steps */
.num-list { counter-reset: numlist; list-style: none; padding: 0; }
.num-list li {
  counter-increment: numlist; padding: 8px 0 8px 36px;
  position: relative; font-size: 14px; color: var(--text2);
  border-bottom: 1px solid rgba(255,255,255,0.03);
}
.num-list li:last-child { border: none; }
.num-list li::before {
  content: counter(numlist); position: absolute; left: 0; top: 8px;
  width: 24px; height: 24px; border-radius: 6px;
  background: var(--surface3); color: var(--text3);
  display: flex; align-items: center; justify-content: center;
  font-size: 12px; font-weight: 700;
  font-family: 'IBM Plex Mono', monospace;
}
</style>
</head>
<body>
<div class="container">

<h1>Person <span>A</span> ‚Äî Build Guide</h1>
<p class="subtitle">AI & Gemini Pipeline | Step-by-step flow with testing instructions</p>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<h2>Your Job in One Sentence</h2>
<p>You take <strong>messy human input</strong> (voice transcripts, photos of documents) and turn it into <strong>clean, structured, actionable financial data</strong> using Google Gemini. You also generate the warm narration script that ElevenLabs will speak to the family.</p>

<div class="callout info">
  <div class="callout-title">YOU OWN 3 THINGS</div>
  <p><strong>1.</strong> POST /api/analyze ‚Äî Transcript ‚Üí Structured JSON</p>
  <p><strong>2.</strong> POST /api/extract-doc ‚Äî Document image ‚Üí Extracted details</p>
  <p><strong>3.</strong> generate_narration_script() ‚Äî Package data ‚Üí Warm narration text (Person B calls this)</p>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<h2>The Complete Flow ‚Äî Where You Fit</h2>

<div class="flow-chain">
  <span class="flow-chip fe">üéô User speaks</span>
  <span class="flow-arrow">‚Üí</span>
  <span class="flow-chip fe">ElevenLabs STT (frontend)</span>
  <span class="flow-arrow">‚Üí</span>
  <span class="flow-chip fe">Transcript string</span>
  <span class="flow-arrow">‚Üí</span>
  <span class="flow-chip you">‚≠ê YOUR /api/analyze</span>
  <span class="flow-arrow">‚Üí</span>
  <span class="flow-chip api">Gemini API</span>
  <span class="flow-arrow">‚Üí</span>
  <span class="flow-chip you">Structured JSON</span>
  <span class="flow-arrow">‚Üí</span>
  <span class="flow-chip fe">Checklist Screen</span>
</div>

<div class="flow-chain">
  <span class="flow-chip fe">üìÑ User uploads doc photo</span>
  <span class="flow-arrow">‚Üí</span>
  <span class="flow-chip you">‚≠ê YOUR /api/extract-doc</span>
  <span class="flow-arrow">‚Üí</span>
  <span class="flow-chip api">Gemini Vision</span>
  <span class="flow-arrow">‚Üí</span>
  <span class="flow-chip you">Extracted details</span>
  <span class="flow-arrow">‚Üí</span>
  <span class="flow-chip fe">Merged into package</span>
</div>

<div class="flow-chain">
  <span class="flow-chip fe">Family clicks "Listen"</span>
  <span class="flow-arrow">‚Üí</span>
  <span class="flow-chip db">Person B loads package</span>
  <span class="flow-arrow">‚Üí</span>
  <span class="flow-chip you">‚≠ê YOUR narration function</span>
  <span class="flow-arrow">‚Üí</span>
  <span class="flow-chip api">Gemini writes script</span>
  <span class="flow-arrow">‚Üí</span>
  <span class="flow-chip db">Person B ‚Üí ElevenLabs TTS</span>
  <span class="flow-arrow">‚Üí</span>
  <span class="flow-chip fe">Audio plays</span>
</div>

<p>Everything in <span style="color: var(--orange);">orange</span> is your responsibility. Let's build each one.</p>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<h2>STEP 0 ‚Äî Setup (Do This First)</h2>

<div class="step-block">
  <div class="step-header">
    <div class="step-num" style="background: var(--surface3); color: var(--text3);">0</div>
    <h4>Get Gemini API working</h4>
    <span class="tag" style="background: var(--yellow-bg); color: var(--yellow);">30 MIN</span>
  </div>
  <div class="step-body">
    <ul>
      <li>Go to <strong>aistudio.google.com</strong></li>
      <li>Click "Get API Key" ‚Üí Create a key</li>
      <li>Put it in your .env file as <strong>GEMINI_API_KEY</strong></li>
      <li>Install the library: <strong>pip install google-generativeai</strong></li>
      <li>Write a tiny test ‚Äî send "Hello, what is 2+2?" to Gemini and make sure you get a response back</li>
    </ul>

    <div class="test-box">
      <div class="test-title">‚úÖ How to test</div>
      <p>Create a file called <strong>test_gemini.py</strong>. Import the library, configure your API key, send a simple message. If you get a response printed in your terminal, you're good. Delete the test file and move on.</p>
      <p><strong>If it fails:</strong> Check your API key is correct. Check you're using the right model name: <strong>"gemini-2.0-flash"</strong>. Check your internet connection.</p>
    </div>

    <div class="callout warn">
      <div class="callout-title">IMPORTANT ‚Äî Model choice</div>
      <p>Use <strong>gemini-2.0-flash</strong> (not gemini-pro or gemini-ultra). It's the fastest, free-tier friendly, and handles structured extraction really well. Good enough for a hackathon. If you hit rate limits, switch to <strong>gemini-1.5-flash</strong>.</p>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<h2>STEP 1 ‚Äî Build /api/analyze (Transcript ‚Üí Structured Data)</h2>

<p>This is your <strong>most important piece</strong>. This is what makes DeathBox smart. Everything else depends on this working well.</p>

<div class="step-block">
  <div class="step-header">
    <div class="step-num" style="background: var(--orange-bg); color: var(--orange);">1a</div>
    <h4>Understand what comes IN and what goes OUT</h4>
  </div>
  <div class="step-body">
    <p><strong>What the frontend sends you:</strong></p>
    <p>A POST request with one field ‚Äî the transcript. This is raw, messy, casual human speech that ElevenLabs already converted from audio to text. It looks like this:</p>

    <div class="data-box"><span class="label">WHAT YOU RECEIVE</span>
{
  <span class="key">"transcript"</span>: <span class="string">"I work at Acme Corp, been there about 3 years.
  I have a 401k through Fidelity I think, my company
  matches like 4 percent. I also have health insurance
  through Anthem, it's a PPO plan. I have an HSA with
  maybe 2 grand in it. I think they give us life insurance
  but honestly I don't remember how much. Oh and I have a
  car loan, about 14K left through Capital One. I pay for
  Netflix and Spotify too. My wife is Sarah."</span>
}</div>

    <p><strong>What you must return:</strong></p>
    <p>Clean, structured JSON with two arrays ‚Äî <strong>found</strong> (things the user mentioned) and <strong>missing</strong> (ADP benefits they forgot to mention). Each item has a type, details, confidence level, and warnings.</p>

    <div class="data-box"><span class="label">WHAT YOU RETURN</span>
{
  <span class="key">"found"</span>: [
    {
      <span class="key">"type"</span>: <span class="string">"401k"</span>,
      <span class="key">"provider"</span>: <span class="string">"Fidelity"</span>,
      <span class="key">"employer_match"</span>: <span class="string">"4%"</span>,
      <span class="key">"balance"</span>: <span class="string">"unknown"</span>,
      <span class="key">"account_number"</span>: <span class="string">"unknown"</span>,
      <span class="key">"beneficiary"</span>: <span class="string">"unknown"</span>,
      <span class="key">"confidence"</span>: <span class="string">"uncertain"</span>,  <span class="comment">// user said "I think"</span>
      <span class="key">"warnings"</span>: [<span class="string">"Beneficiary not specified ‚Äî CRITICAL"</span>, <span class="string">"Account number not provided"</span>]
    },
    {
      <span class="key">"type"</span>: <span class="string">"health_insurance"</span>,
      <span class="key">"provider"</span>: <span class="string">"Anthem"</span>,
      <span class="key">"plan_type"</span>: <span class="string">"PPO"</span>,
      <span class="key">"cobra_eligible"</span>: <span class="num">true</span>,
      <span class="key">"cobra_deadline_days"</span>: <span class="num">60</span>,
      <span class="key">"confidence"</span>: <span class="string">"certain"</span>,
      <span class="key">"warnings"</span>: [<span class="string">"Family has 60 days to elect COBRA after death"</span>]
    },
    {
      <span class="key">"type"</span>: <span class="string">"hsa"</span>,
      <span class="key">"balance"</span>: <span class="num">2000</span>,
      <span class="key">"beneficiary"</span>: <span class="string">"unknown"</span>,
      <span class="key">"confidence"</span>: <span class="string">"uncertain"</span>,
      <span class="key">"warnings"</span>: [<span class="string">"No beneficiary designated ‚Äî HSA transfers tax-free to beneficiary"</span>]
    },
    {
      <span class="key">"type"</span>: <span class="string">"life_insurance"</span>,
      <span class="key">"coverage"</span>: <span class="string">"unknown"</span>,
      <span class="key">"provider"</span>: <span class="string">"unknown"</span>,
      <span class="key">"policy_number"</span>: <span class="string">"unknown"</span>,
      <span class="key">"confidence"</span>: <span class="string">"vague"</span>,  <span class="comment">// user said "I think they give us some"</span>
      <span class="key">"warnings"</span>: [<span class="string">"Coverage amount unknown ‚Äî most ADP employers offer $50K-$150K group term"</span>, <span class="string">"Policy number needed for family to file claim"</span>]
    },
    {
      <span class="key">"type"</span>: <span class="string">"auto_loan"</span>,
      <span class="key">"lender"</span>: <span class="string">"Capital One"</span>,
      <span class="key">"balance"</span>: <span class="num">14000</span>,
      <span class="key">"confidence"</span>: <span class="string">"certain"</span>,
      <span class="key">"warnings"</span>: [<span class="string">"Secured debt ‚Äî family NOT liable unless co-signed"</span>]
    },
    {
      <span class="key">"type"</span>: <span class="string">"subscription"</span>,
      <span class="key">"services"</span>: [<span class="string">"Netflix"</span>, <span class="string">"Spotify"</span>],
      <span class="key">"confidence"</span>: <span class="string">"certain"</span>,
      <span class="key">"warnings"</span>: [<span class="string">"Will keep charging after death ‚Äî cancel immediately"</span>]
    }
  ],
  <span class="key">"missing"</span>: [
    {
      <span class="key">"type"</span>: <span class="string">"pto_accrued"</span>,
      <span class="key">"reason"</span>: <span class="string">"User did not mention PTO/vacation days"</span>,
      <span class="key">"urgency"</span>: <span class="string">"critical"</span>,
      <span class="key">"why_it_matters"</span>: <span class="string">"In many states (especially CA), unused PTO must be paid out to the estate. Could be worth $2,000-$10,000+."</span>
    },
    {
      <span class="key">"type"</span>: <span class="string">"add_insurance"</span>,
      <span class="key">"reason"</span>: <span class="string">"User did not mention AD&D insurance"</span>,
      <span class="key">"urgency"</span>: <span class="string">"high"</span>,
      <span class="key">"why_it_matters"</span>: <span class="string">"90% of workers don't know they have Accidental Death & Dismemberment insurance. Often bundled free with group life. Could be an additional $50K-$150K payout."</span>
    },
    {
      <span class="key">"type"</span>: <span class="string">"stock_rsu"</span>,
      <span class="key">"reason"</span>: <span class="string">"User did not mention equity/stock"</span>,
      <span class="key">"urgency"</span>: <span class="string">"medium"</span>,
      <span class="key">"why_it_matters"</span>: <span class="string">"If employer offers stock options or RSUs, vested shares are part of the estate. Unvested may be forfeited."</span>
    },
    {
      <span class="key">"type"</span>: <span class="string">"pension"</span>,
      <span class="key">"reason"</span>: <span class="string">"User did not mention pension or survivor benefits"</span>,
      <span class="key">"urgency"</span>: <span class="string">"medium"</span>,
      <span class="key">"why_it_matters"</span>: <span class="string">"Some employers still offer pensions. Spouse may be entitled to survivor benefits."</span>
    }
  ],
  <span class="key">"employee_info"</span>: {
    <span class="key">"employer"</span>: <span class="string">"Acme Corp"</span>,
    <span class="key">"years_employed"</span>: <span class="num">3</span>,
    <span class="key">"spouse"</span>: <span class="string">"Sarah"</span>
  }
}</div>
  </div>
</div>

<div class="step-block">
  <div class="step-header">
    <div class="step-num" style="background: var(--orange-bg); color: var(--orange);">1b</div>
    <h4>Write the Gemini prompt</h4>
    <span class="tag" style="background: var(--red-bg); color: var(--red);">CRITICAL ‚Äî SPEND TIME HERE</span>
  </div>
  <div class="step-body">
    <p>This prompt is the <strong>heart of the entire product</strong>. It tells Gemini how to extract data and what to flag as missing. Here's the thinking behind it:</p>

    <p><strong>The prompt needs to do 4 things:</strong></p>
    <ul>
      <li><strong>Extract</strong> every financial account, benefit, debt, and subscription from messy speech</li>
      <li><strong>Assess confidence</strong> ‚Äî "I have a 401k" = certain, "I think they give us insurance" = uncertain</li>
      <li><strong>Generate warnings</strong> ‚Äî For each item, what should the family know? (deadlines, gotchas, legal info)</li>
      <li><strong>Detect missing items</strong> ‚Äî Compare against a list of standard ADP employer benefits and flag what wasn't mentioned</li>
    </ul>

    <div class="prompt-block">
      <div class="prompt-label">üß† The Gemini System Prompt (what you send)</div>
      <p>You are a financial data extraction engine for DeathBox, a financial afterlife planning tool. Your job is to analyze a transcript of someone describing their financial life and extract ALL financial information into structured JSON.</p>
      <p>&nbsp;</p>
      <p>EXTRACTION RULES:</p>
      <p>1. Extract every financial account, benefit, insurance, debt, loan, subscription, and asset mentioned.</p>
      <p>2. For each item, include: type, provider/company, amounts (if mentioned), account/policy numbers (if mentioned), beneficiary (if mentioned).</p>
      <p>3. Assess confidence: "certain" (user stated clearly), "uncertain" (user said "I think" or "maybe" or "about"), "vague" (user barely mentioned it).</p>
      <p>4. Add warnings for each item ‚Äî things the family NEEDS to know. For example: COBRA has a 60-day deadline, credit card debt doesn't transfer to family, beneficiary designations override wills.</p>
      <p>5. Mark any field where the user didn't provide specific info as "unknown".</p>
      <p>&nbsp;</p>
      <p>MISSING ITEMS DETECTION:</p>
      <p>Compare what the user mentioned against this list of standard employer benefits that ADP typically administers. If any of these are NOT mentioned, add them to the "missing" array with a reason and urgency level:</p>
      <p>- 401k / retirement plan</p>
      <p>- Group Term Life Insurance (most employers include $50K-$150K free)</p>
      <p>- Accidental Death & Dismemberment (AD&D) insurance (usually bundled with life insurance, 90% of workers don't know they have it)</p>
      <p>- Health Savings Account (HSA)</p>
      <p>- Accrued PTO / vacation days (many states require payout to estate)</p>
      <p>- COBRA eligibility (family can continue health insurance for 18-36 months, 60-day election deadline)</p>
      <p>- Stock Options / RSUs (if tech or public company)</p>
      <p>- Pension / Defined Benefit Plan / Survivor Benefits</p>
      <p>- Employee Stock Purchase Plan (ESPP)</p>
      <p>- Disability insurance (short-term and long-term)</p>
      <p>&nbsp;</p>
      <p>Also extract: employer name, years of employment, spouse/family names if mentioned.</p>
      <p>&nbsp;</p>
      <p>Return ONLY valid JSON. No markdown, no explanation, no backticks. Just the JSON object.</p>
    </div>

    <div class="callout tip">
      <div class="callout-title">üí° PROMPT ITERATION TIP</div>
      <p>Start with this prompt, test it, and then refine. The most common issues: Gemini wrapping JSON in markdown backticks (add "no backticks" to your prompt), Gemini adding explanation text before the JSON (add "Return ONLY JSON"), and Gemini missing confidence levels (be more explicit about the rules).</p>
    </div>
  </div>
</div>

<div class="step-block">
  <div class="step-header">
    <div class="step-num" style="background: var(--orange-bg); color: var(--orange);">1c</div>
    <h4>Build the endpoint in gemini_service.py</h4>
    <span class="tag" style="background: var(--yellow-bg); color: var(--yellow);">2 HRS</span>
  </div>
  <div class="step-body">
    <p><strong>What you write (in gemini_service.py):</strong></p>
    <p>A function called <strong>analyze_transcript(transcript)</strong> that:</p>
    <ol class="num-list">
      <li>Takes the transcript string as input</li>
      <li>Constructs the full prompt: your system prompt + "Here is the transcript:" + the transcript text</li>
      <li>Sends it to Gemini API (model: gemini-2.0-flash)</li>
      <li>Gets back Gemini's response text</li>
      <li>Cleans the response ‚Äî strip any markdown backticks if present (Gemini sometimes wraps JSON in ```json...```)</li>
      <li>Parses the response as JSON</li>
      <li>Returns the parsed JSON object (the found + missing structure)</li>
    </ol>

    <p style="margin-top: 16px;"><strong>Then in main.py, Person B adds the route:</strong></p>
    <p>The /api/analyze endpoint just calls your analyze_transcript() function and returns whatever it returns. Person B wires the route, you own the logic.</p>

    <div class="callout warn">
      <div class="callout-title">‚ö†Ô∏è GEMINI RESPONSE CLEANING</div>
      <p>Gemini sometimes returns: <strong>```json\n{...}\n```</strong> instead of just <strong>{...}</strong>. Your function MUST strip the backticks and "json" label before parsing. Check if the response starts with "```" and if so, remove the first and last lines. This is the #1 bug you'll hit.</p>
    </div>
  </div>
</div>

<div class="step-block">
  <div class="step-header">
    <div class="step-num" style="background: var(--green-bg); color: var(--green);">‚úì</div>
    <h4>TEST: /api/analyze</h4>
    <span class="tag" style="background: var(--green-bg); color: var(--green);">TEST NOW</span>
  </div>
  <div class="step-body">
    <div class="test-box">
      <div class="test-title">‚úÖ How to test (without frontend)</div>
      <p>Use <strong>Postman</strong>, <strong>curl</strong>, or a simple Python test script. Send a POST request to http://localhost:8000/api/analyze with different transcript examples and check what comes back.</p>
    </div>

    <p><strong>Test with 4 different transcripts:</strong></p>

    <p><strong>Test 1 ‚Äî Rich transcript (lots of detail):</strong></p>
    <p style="color: var(--text3); font-style: italic;">"I work at Google in Mountain View, been there 5 years. I have a 401k with Fidelity, about 87 thousand in there, they match 50% up to 6%. I have a PPO health plan through Aetna. My HSA has around 5 grand. Life insurance is 2x my salary so about 300K through MetLife. I've got 200 vested RSUs worth about $140 each. I have 18 days of PTO saved up. Oh and I have a mortgage, 340K left with Wells Fargo. Car loan 22K with Chase. I pay Netflix, Spotify, YouTube Premium, and my gym membership at Equinox. My wife is Priya."</p>
    <p><strong>Expected: </strong>Many found items with "certain" confidence. Missing should only flag things not mentioned (AD&D, pension, ESPP maybe).</p>

    <p style="margin-top: 16px;"><strong>Test 2 ‚Äî Vague transcript (uncertain language):</strong></p>
    <p style="color: var(--text3); font-style: italic;">"I work at some company, I think I have some retirement thing? Maybe through Fidelity. I'm pretty sure we have insurance. Oh and I think I owe money on something."</p>
    <p><strong>Expected: </strong>Few found items with "uncertain" or "vague" confidence. Lots of missing items. Lots of warnings about missing details.</p>

    <p style="margin-top: 16px;"><strong>Test 3 ‚Äî Short transcript:</strong></p>
    <p style="color: var(--text3); font-style: italic;">"I work at Walmart. I have a 401k."</p>
    <p><strong>Expected: </strong>One found item (401k). Many missing items flagged.</p>

    <p style="margin-top: 16px;"><strong>Test 4 ‚Äî Long, rambling transcript with personal stories mixed in:</strong></p>
    <p style="color: var(--text3); font-style: italic;">"So yeah I work at this startup called TechFlow, it's been a wild ride honestly, about 2 years now. The pay is okay I guess. I have a 401k but I don't think they match, which sucks. We get insurance through Blue Cross Blue Shield, it's decent. My buddy told me we probably have life insurance too but nobody really explained it. I've been meaning to check my HSA balance, probably like a thousand bucks in there. I also have student loans, about 45K federal with Navient. And credit card debt, ugh, about 8K across two cards. I pay for like everything streaming ‚Äî Netflix, Hulu, Disney+, HBO Max, Spotify. My girlfriend Mia should probably know about all this."</p>
    <p><strong>Expected: </strong>Gemini should extract everything despite the casual tone. Should flag: student loans discharged upon death (federal), credit card debt does NOT transfer to family. Should mark life insurance as "vague." Should detect Mia as the designated person.</p>

    <div class="callout danger">
      <div class="callout-title">üö® IF THE RESPONSE IS BROKEN JSON</div>
      <p>If Gemini returns something that won't parse as JSON, add this to your prompt: <strong>"You must return ONLY a single JSON object. No text before it. No text after it. No markdown formatting. No backticks. Start your response with { and end with }."</strong></p>
    </div>

    <div class="callout tip">
      <div class="callout-title">üí° FALLBACK FOR DEMO</div>
      <p>If Gemini is slow or fails during the live demo, have a <strong>hardcoded fallback response</strong> ready. Create a file called mock_data.py with the pre-built JSON response for the demo transcript. If the Gemini call fails or takes more than 10 seconds, return the mock data instead. The demo MUST always work.</p>
    </div>
  </div>
</div>

<div class="divider"></div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<h2>STEP 2 ‚Äî Build /api/extract-doc (Document Image ‚Üí Details)</h2>

<p>This is the NEW feature we added. After the checklist shows gaps, the user uploads a photo of their pay stub or benefits statement, and Gemini reads it to fill in the missing account numbers and details.</p>

<div class="step-block">
  <div class="step-header">
    <div class="step-num" style="background: var(--orange-bg); color: var(--orange);">2a</div>
    <h4>Understand the flow</h4>
  </div>
  <div class="step-body">
    <div class="flow-chain">
      <span class="flow-chip fe">Checklist shows: "401k account # unknown"</span>
      <span class="flow-arrow">‚Üí</span>
      <span class="flow-chip fe">User takes photo of pay stub</span>
      <span class="flow-arrow">‚Üí</span>
      <span class="flow-chip you">Your /api/extract-doc</span>
      <span class="flow-arrow">‚Üí</span>
      <span class="flow-chip api">Gemini reads the image</span>
      <span class="flow-arrow">‚Üí</span>
      <span class="flow-chip you">Returns extracted details</span>
      <span class="flow-arrow">‚Üí</span>
      <span class="flow-chip fe">Frontend merges into package</span>
    </div>

    <p><strong>What the frontend sends you:</strong></p>
    <p>A multipart/form-data POST request with the image file (JPEG, PNG, or PDF). The frontend uses a file input or camera capture.</p>

    <p><strong>What you return:</strong></p>
    <div class="data-box"><span class="label">WHAT YOU RETURN</span>
{
  <span class="key">"extracted"</span>: [
    {
      <span class="key">"type"</span>: <span class="string">"employee_id"</span>,
      <span class="key">"value"</span>: <span class="string">"A4821"</span>,
      <span class="key">"source"</span>: <span class="string">"pay stub header"</span>
    },
    {
      <span class="key">"type"</span>: <span class="string">"401k_deduction"</span>,
      <span class="key">"value"</span>: <span class="string">"$450/paycheck to Fidelity"</span>,
      <span class="key">"account_hint"</span>: <span class="string">"Acct ending 8923"</span>
    },
    {
      <span class="key">"type"</span>: <span class="string">"life_insurance"</span>,
      <span class="key">"provider"</span>: <span class="string">"MetLife"</span>,
      <span class="key">"group_policy"</span>: <span class="string">"GL-49201"</span>,
      <span class="key">"coverage"</span>: <span class="num">150000</span>
    },
    {
      <span class="key">"type"</span>: <span class="string">"hsa_contribution"</span>,
      <span class="key">"value"</span>: <span class="string">"$100/paycheck to HealthEquity"</span>
    }
  ],
  <span class="key">"document_type"</span>: <span class="string">"pay_stub"</span>,
  <span class="key">"employer_confirmed"</span>: <span class="string">"Acme Corp"</span>
}</div>

    <p>The frontend takes this and merges it into the existing package_data ‚Äî filling in the "unknown" fields with real values. Then when the user clicks "Seal," Person B's /api/seal endpoint gets the <strong>complete</strong> data.</p>
  </div>
</div>

<div class="step-block">
  <div class="step-header">
    <div class="step-num" style="background: var(--orange-bg); color: var(--orange);">2b</div>
    <h4>The Gemini Vision prompt for document extraction</h4>
    <span class="tag" style="background: var(--yellow-bg); color: var(--yellow);">1.5 HRS</span>
  </div>
  <div class="step-body">
    <p><strong>How Gemini Vision works:</strong></p>
    <p>Gemini can accept images as input alongside text. You send the image (as base64 or as a file upload) plus a text prompt, and Gemini "reads" the image and responds based on what it sees.</p>

    <ol class="num-list">
      <li>Frontend sends you the image file</li>
      <li>You read the image bytes</li>
      <li>You send to Gemini: the image + your extraction prompt</li>
      <li>Gemini looks at the image, reads all the text in it, and extracts the financial details</li>
      <li>You parse the JSON response and return it</li>
    </ol>

    <div class="prompt-block">
      <div class="prompt-label">üß† Gemini Document Extraction Prompt</div>
      <p>You are a financial document reader for DeathBox. The user has uploaded a photo of a financial document (pay stub, benefits statement, insurance card, 401k summary, etc.).</p>
      <p>&nbsp;</p>
      <p>Extract EVERY piece of financial information you can find. Focus especially on:</p>
      <p>- Employee ID / employee number</p>
      <p>- Account numbers (even partial, like "ending in 8923")</p>
      <p>- Policy numbers (life insurance, health insurance)</p>
      <p>- Provider names (Fidelity, MetLife, Anthem, etc.)</p>
      <p>- Dollar amounts (balances, deductions, coverage amounts)</p>
      <p>- Beneficiary names if visible</p>
      <p>- Employer name</p>
      <p>- Plan types (PPO, HMO, Group Term, etc.)</p>
      <p>- Any reference numbers, group numbers, or ID numbers</p>
      <p>&nbsp;</p>
      <p>Also identify what type of document this is (pay_stub, benefits_statement, insurance_card, 401k_summary, tax_form, unknown).</p>
      <p>&nbsp;</p>
      <p>Return ONLY valid JSON. No markdown, no backticks, no explanation.</p>
    </div>

    <div class="callout info">
      <div class="callout-title">‚ÑπÔ∏è SENDING IMAGES TO GEMINI</div>
      <p>With the google-generativeai Python library, you can send images directly. You create the content as a list containing both the text prompt AND the image data. The library handles encoding. Check Google's docs for "Gemini vision" ‚Äî it's straightforward.</p>
      <p>The image can be: a raw bytes object, a PIL Image, or a base64 string. The easiest approach: read the uploaded file as bytes and pass it directly.</p>
    </div>
  </div>
</div>

<div class="step-block">
  <div class="step-header">
    <div class="step-num" style="background: var(--green-bg); color: var(--green);">‚úì</div>
    <h4>TEST: /api/extract-doc</h4>
    <span class="tag" style="background: var(--green-bg); color: var(--green);">TEST NOW</span>
  </div>
  <div class="step-body">
    <div class="test-box">
      <div class="test-title">‚úÖ How to test</div>
      <p><strong>You need a test image.</strong> Google "sample pay stub" or "sample benefits statement" and save one. Or create a fake one ‚Äî just a screenshot of a document with financial details.</p>
      <p>Send the image to your endpoint using Postman (use form-data, attach the image file) or curl.</p>
      <p>Check that Gemini returns sensible extracted data from the image.</p>
    </div>

    <div class="callout tip">
      <div class="callout-title">üí° FOR THE DEMO</div>
      <p>Prepare a <strong>good-looking fake pay stub</strong> image beforehand that has clear, readable data: employee ID, 401k deduction with provider name, life insurance line item with policy number, HSA contribution. During the demo, "upload" this prepared image. The extraction will look amazing and pull out all the real details. Don't rely on a random blurry phone photo.</p>
    </div>
  </div>
</div>

<div class="divider"></div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<h2>STEP 3 ‚Äî Build generate_narration_script() (Package ‚Üí Voice Script)</h2>

<p>This is NOT an endpoint. It's a <strong>function</strong> in your gemini_service.py that Person B calls from their /api/narrate endpoint. You write it, they use it.</p>

<div class="step-block">
  <div class="step-header">
    <div class="step-num" style="background: var(--orange-bg); color: var(--orange);">3a</div>
    <h4>Understand what this does</h4>
  </div>
  <div class="step-body">
    <div class="flow-chain">
      <span class="flow-chip db">Person B loads package_data from DB</span>
      <span class="flow-arrow">‚Üí</span>
      <span class="flow-chip you">YOUR generate_narration_script(package_data)</span>
      <span class="flow-arrow">‚Üí</span>
      <span class="flow-chip api">Gemini writes a warm script</span>
      <span class="flow-arrow">‚Üí</span>
      <span class="flow-chip you">Returns script text string</span>
      <span class="flow-arrow">‚Üí</span>
      <span class="flow-chip db">Person B sends text to ElevenLabs TTS ‚Üí audio</span>
    </div>

    <p><strong>Input:</strong> The package_data JSON (the same structured data from /api/analyze).</p>

    <p><strong>Output:</strong> A plain text string ‚Äî the narration script. This is what ElevenLabs will speak out loud to the family. Example:</p>

    <div class="data-box"><span class="label">EXAMPLE NARRATION SCRIPT (your function returns this text)</span>
<span class="string">"Hi Sarah. I know this is an incredibly hard time, and
the last thing you need right now is financial confusion.
So here's everything organized for you.

The most urgent thing: you have 60 days to keep your
health insurance through COBRA. Call Acme Corp HR at the
main office number and reference employee ID A4821. Ask
to elect COBRA continuation coverage for dependents.

Next, there's a life insurance policy through MetLife,
group policy number GL-49201, with coverage of $150,000.
Call MetLife directly to file a claim. You'll need a
death certificate.

Your husband's 401k is with Fidelity. The account may
still list his mother as beneficiary ‚Äî this is something
you may need to discuss with a lawyer.

The HSA has about $2,000 in it ‚Äî this transfers to you
tax-free.

He had 14 days of unused PTO. In California, the company
is legally required to pay this out to the estate. That's
about $4,300.

His car loan has $14,000 remaining through Capital One.
You are NOT personally liable for this unless you
co-signed. Do not let collectors tell you otherwise.

Don't forget to cancel Netflix and Spotify to stop
ongoing charges.

You're going to get through this. One call at a time."</span></div>
  </div>
</div>

<div class="step-block">
  <div class="step-header">
    <div class="step-num" style="background: var(--orange-bg); color: var(--orange);">3b</div>
    <h4>The narration prompt</h4>
    <span class="tag" style="background: var(--yellow-bg); color: var(--yellow);">1 HR</span>
  </div>
  <div class="step-body">
    <div class="prompt-block">
      <div class="prompt-label">üß† Gemini Narration Script Prompt</div>
      <p>You are writing a voice narration script for DeathBox. A person has died, and their family member is hearing this audio walkthrough of the deceased's financial situation.</p>
      <p>&nbsp;</p>
      <p>TONE: Warm, empathetic, calm, and clear. This person is grieving. Don't be clinical or robotic. Be human. Use their name. Be gentle but direct ‚Äî they need actionable information, not vague comfort.</p>
      <p>&nbsp;</p>
      <p>STRUCTURE:</p>
      <p>1. Start with a brief, compassionate greeting using the recipient's name.</p>
      <p>2. Lead with the most URGENT items (COBRA deadline, insurance claims with time limits).</p>
      <p>3. Then cover money they're owed (PTO payout, HSA balance, final paycheck).</p>
      <p>4. Then explain debts ‚Äî especially which ones the family is NOT responsible for.</p>
      <p>5. Mention subscriptions to cancel.</p>
      <p>6. End with a brief encouraging line.</p>
      <p>&nbsp;</p>
      <p>RULES:</p>
      <p>- Include specific names, numbers, policy numbers, phone numbers where available.</p>
      <p>- Where information is "unknown," say "you'll need to check with HR" or "look for this in their benefits portal."</p>
      <p>- Keep it under 500 words (about 3-4 minutes when spoken).</p>
      <p>- Don't use bullet points or formatting ‚Äî this will be spoken out loud. Use natural speech patterns.</p>
      <p>- Return ONLY the script text. No JSON, no labels, no formatting instructions.</p>
      <p>&nbsp;</p>
      <p>Here is the financial package data:</p>
      <p>[INSERT THE PACKAGE_DATA JSON HERE]</p>
    </div>

    <div class="callout info">
      <div class="callout-title">‚ÑπÔ∏è THE PROMPT STRUCTURE</div>
      <p>Your function constructs the full prompt by combining: the system instructions above + the actual package_data JSON stringified at the end. Send the whole thing to Gemini. Gemini returns just the script text (not JSON this time ‚Äî just plain text). Return that text as-is to Person B.</p>
    </div>
  </div>
</div>

<div class="step-block">
  <div class="step-header">
    <div class="step-num" style="background: var(--green-bg); color: var(--green);">‚úì</div>
    <h4>TEST: Narration script</h4>
    <span class="tag" style="background: var(--green-bg); color: var(--green);">TEST NOW</span>
  </div>
  <div class="step-body">
    <div class="test-box">
      <div class="test-title">‚úÖ How to test</div>
      <p>Create a test script that calls your generate_narration_script() function with a hardcoded package_data JSON. Print the result. Read it out loud ‚Äî does it sound natural? Is it warm? Does it include the specific details from the data? Is it under 500 words?</p>
      <p>Try it with different package_data examples ‚Äî one with lots of detail, one with mostly "unknown" fields. The script should adapt.</p>
    </div>

    <div class="callout tip">
      <div class="callout-title">üí° DEMO TIP</div>
      <p>The narration script is what plays when the family clicks "Listen" ‚Äî this is the <strong>emotional climax of the demo</strong>. Judges will hear this. Spend extra time making sure the script sounds genuinely caring and human. If Gemini generates something too robotic, tweak the prompt ‚Äî add phrases like "write like you're a kind friend explaining finances, not a banker."</p>
    </div>
  </div>
</div>

<div class="divider"></div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<h2>STEP 4 ‚Äî Create Mock ADP Data (Fallback)</h2>

<div class="step-block">
  <div class="step-header">
    <div class="step-num" style="background: var(--orange-bg); color: var(--orange);">4</div>
    <h4>Hardcoded fallback for the demo</h4>
    <span class="tag" style="background: var(--yellow-bg); color: var(--yellow);">30 MIN</span>
  </div>
  <div class="step-body">
    <p>Create a file called <strong>mock_data.py</strong> with a pre-built response that matches the demo transcript. If Gemini is slow, down, or rate-limited during the live demo, your /api/analyze endpoint returns this mock data instead. <strong>The demo must ALWAYS work.</strong></p>

    <p>The mock data should match whatever transcript you plan to use in the live demo. If your demo transcript mentions a 401k, Fidelity, car loan, etc. ‚Äî the mock data should have exactly those items extracted with full detail.</p>

    <p><strong>How to use it:</strong></p>
    <ul>
      <li>In your analyze_transcript() function, wrap the Gemini call in a try/except with a timeout</li>
      <li>If Gemini responds within 10 seconds ‚Üí use real response</li>
      <li>If Gemini fails or is too slow ‚Üí return the mock data</li>
      <li>The frontend won't know the difference ‚Äî same JSON shape either way</li>
    </ul>

    <div class="callout danger">
      <div class="callout-title">üö® DO NOT SKIP THIS</div>
      <p>Every hackathon team that depends on a live API call during their demo has a horror story. APIs go down. Rate limits hit at the worst moment. WiFi drops. The mock data fallback is your insurance policy. Build it.</p>
    </div>
  </div>
</div>

<div class="divider"></div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<h2>Your Complete Build Order + Testing Checkpoints</h2>

<div class="step-block" style="border-color: var(--orange);">
  <div class="step-header" style="background: var(--orange-bg);">
    <h4 style="color: var(--orange);">üó∫Ô∏è Do things in THIS order</h4>
  </div>
  <div class="step-body">
    <ol class="num-list">
      <li><strong>Hour 0‚Äì0.5:</strong> Setup ‚Äî get Gemini API key, install library, test a simple call.
        <br><span style="color: var(--green);">‚úÖ CHECKPOINT: Gemini responds to "Hello" ‚Üí you're good</span></li>

      <li><strong>Hour 0.5‚Äì2:</strong> Write the analyze_transcript() prompt + function. Send test transcripts.
        <br><span style="color: var(--green);">‚úÖ CHECKPOINT: Send the rich test transcript ‚Üí get back clean JSON with found + missing arrays</span></li>

      <li><strong>Hour 2‚Äì3:</strong> Test with 3 more transcript variations. Refine the prompt until the output is consistently good. Fix JSON parsing issues.
        <br><span style="color: var(--green);">‚úÖ CHECKPOINT: All 4 test transcripts return valid, sensible JSON</span></li>

      <li><strong>Hour 3‚Äì3.5:</strong> Create mock_data.py with the hardcoded fallback.
        <br><span style="color: var(--green);">‚úÖ CHECKPOINT: When Gemini is faked as "down", /api/analyze still returns good data</span></li>

      <li><strong>Hour 3.5‚Äì5:</strong> Build the document extraction function + /api/extract-doc endpoint. Test with a sample pay stub image.
        <br><span style="color: var(--green);">‚úÖ CHECKPOINT: Upload a pay stub image ‚Üí get back extracted employee ID, account details, policy numbers</span></li>

      <li><strong>Hour 5‚Äì6.5:</strong> Write generate_narration_script() function. Test with hardcoded package data.
        <br><span style="color: var(--green);">‚úÖ CHECKPOINT: Function returns a warm, human script that sounds good when read aloud</span></li>

      <li><strong>Hour 6.5‚Äì7:</strong> Tell Person B your functions are ready. They import generate_narration_script() into their /api/narrate endpoint.
        <br><span style="color: var(--green);">‚úÖ CHECKPOINT: Person B calls your function ‚Üí gets a script ‚Üí sends to ElevenLabs ‚Üí audio plays</span></li>

      <li><strong>Hour 7‚Äì8:</strong> Test the full flow with the frontend. Frontend records ‚Üí transcript ‚Üí your /api/analyze ‚Üí checklist ‚Üí upload doc ‚Üí your /api/extract-doc ‚Üí seal (Person B) ‚Üí family view ‚Üí narrate (your script + Person B's audio).
        <br><span style="color: var(--green);">‚úÖ CHECKPOINT: Full end-to-end flow works without errors</span></li>

      <li><strong>Hour 8‚Äì9:</strong> Polish prompts. Make the narration script sound better. Make the checklist warnings more specific and helpful. Test edge cases.
        <br><span style="color: var(--green);">‚úÖ CHECKPOINT: Demo-ready. Everything works smoothly.</span></li>

      <li><strong>Hour 9‚Äì10:</strong> Rehearse the demo. Practice the exact transcript you'll speak. Make sure mock data kicks in if Gemini fails. Prepare the pay stub image for the document upload demo moment.
        <br><span style="color: var(--green);">‚úÖ CHECKPOINT: You can demo the full flow confidently in under 3 minutes</span></li>
    </ol>
  </div>
</div>

<div class="divider"></div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<h2>Files You Create</h2>

<div class="step-block">
  <div class="step-body">
    <ul>
      <li><strong>gemini_service.py</strong> ‚Äî Your main file. Contains: analyze_transcript(), extract_document(), generate_narration_script(). All Gemini logic lives here.</li>
      <li><strong>mock_data.py</strong> ‚Äî Hardcoded fallback JSON for when Gemini fails during the demo.</li>
      <li><strong>test_gemini.py</strong> ‚Äî (temporary) Your test scripts for verifying each function works. Delete before final submission or keep for reference.</li>
    </ul>

    <p style="margin-top: 16px;"><strong>Functions you export (other people call these):</strong></p>
    <ul>
      <li><strong>analyze_transcript(transcript: str) ‚Üí dict</strong> ‚Äî Person B wires this to /api/analyze route</li>
      <li><strong>extract_document(image_bytes: bytes) ‚Üí dict</strong> ‚Äî Person B wires this to /api/extract-doc route</li>
      <li><strong>generate_narration_script(package_data: dict) ‚Üí str</strong> ‚Äî Person B calls this inside /api/narrate</li>
    </ul>
  </div>
</div>

<div class="divider"></div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<h2>Quick Reference ‚Äî What Comes from Where</h2>

<div class="step-block">
  <div class="step-body" style="padding: 20px;">
    <table style="width: 100%; border-collapse: collapse; font-size: 13px;">
      <tr style="border-bottom: 1px solid var(--border);">
        <td style="padding: 10px; color: var(--text3); width: 30%;">User's voice</td>
        <td style="padding: 10px;">‚Üí Frontend captures ‚Üí ElevenLabs STT (frontend) ‚Üí transcript string ‚Üí <strong style="color: var(--orange);">YOUR /api/analyze</strong></td>
      </tr>
      <tr style="border-bottom: 1px solid var(--border);">
        <td style="padding: 10px; color: var(--text3);">User's document photo</td>
        <td style="padding: 10px;">‚Üí Frontend captures ‚Üí <strong style="color: var(--orange);">YOUR /api/extract-doc</strong></td>
      </tr>
      <tr style="border-bottom: 1px solid var(--border);">
        <td style="padding: 10px; color: var(--text3);">ADP benefit data</td>
        <td style="padding: 10px;">‚Üí Hardcoded in <strong style="color: var(--orange);">YOUR Gemini prompt</strong> as knowledge (the list of standard benefits to check against)</td>
      </tr>
      <tr style="border-bottom: 1px solid var(--border);">
        <td style="padding: 10px; color: var(--text3);">Narration audio</td>
        <td style="padding: 10px;">‚Üí <strong style="color: var(--orange);">YOUR generate_narration_script()</strong> ‚Üí Person B sends to ElevenLabs TTS ‚Üí MP3</td>
      </tr>
      <tr>
        <td style="padding: 10px; color: var(--text3);">Solana hash</td>
        <td style="padding: 10px;">‚Üí NOT your job. Person B handles this.</td>
      </tr>
    </table>
  </div>
</div>

<div style="text-align: center; padding: 48px 0 24px; color: var(--text3); font-size: 14px; font-style: italic;">
  You're the brain of DeathBox. If your Gemini prompts are good, the whole product shines. Take the time to get them right.
</div>

</div>
</body>
</html>
